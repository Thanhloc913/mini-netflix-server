syntax = "proto3";

package file;

service FileService {
  rpc UploadAvatarFile (UploadAvatarFileRequest) returns (UploadAvatarFileResponse);
  rpc UploadMovieFile (UploadMovieFileRequest) returns (UploadMovieFileResponse);
  rpc GenerateMoviePresignedUrl (PresignRequest) returns (PresignResponse);
  rpc GenerateReadSasUrl (ReadSasRequest) returns (ReadSasResponse);
}

message UploadAvatarFileRequest {
  bytes data = 1;
}

message UploadAvatarFileResponse {
  string url = 1;
}

message UploadMovieFileRequest {
  bytes data = 1;
}

message UploadMovieFileResponse {
  string url = 1;
}

message PresignRequest {}

message PresignResponse {
  string uploadUrl = 1;
  string blobUrl = 2;
}

message ReadSasRequest {
  string blobUrl = 1; // link blob gốc
}

message ReadSasResponse {
  string sasUrl = 1; // SAS url để đọc
}
